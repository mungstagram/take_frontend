# [Pupfluencer] 강아지 자랑 SNS

## ✨ Pupfluencer | 펍플루언서

![https://i.imgur.com/V5GTXXv.png](https://i.imgur.com/V5GTXXv.png)

## 👉🏻 프로젝트 소개

- 펍플루언서란 [Puppy + Influencer]의 합성어입니다.
- 너무 귀엽고 웃긴 우리 강아지의 모습을 나만 보기 아깝다고 느끼실 때
- 사진과 동영상으로 우리 강아지의 깜찍한 순간을 기록하고 공유하는 강아지 자랑 SNS

✨ 댕댕이 자랑 커뮤니티 SNS Pupfluencer 입니다. 🥳

## 👉🏻 서비스 소개 <br>

- 강아지 프로필을 등록하여 간단한 정보를 기록할 수 있어요
- 사진, 동영상 게시판을 통해 우리 댕댕이의 모습을 공유할 수 있어요
- ToDo 리스트를 통해 산책하기, 약 먹이기, 미용하기 등 해야할 일들을 기록하고 관리할 수 있어요
- DM 기능을 통해 다른 귀여운 댕댕이를 키우는 분들과 소통할 수 있어요

👉🏻[펍플루언서 다운받기 Click!](https://drive.google.com/file/d/1hlK_89oQS6gZPt3ypkx3cN8F7ZsW3qbI/view?usp=share_link) 
👉🏻[펍플루언서 팀 노션  Click!](https://www.notion.so/Pupfluencer-Puppy-Influencer-efa35ef0406940bdb10cc6937cc78906)

## 🛠 프로젝트 아키텍쳐

![아키텍처](https://user-images.githubusercontent.com/114650436/224319422-eb961015-903a-42e5-8eec-07bae3730c01.png)

## ⚙ 기술 스택

### ✔ Frond-end
<div>

<img src="https://img.shields.io/badge/Redux Toolkit-764ABC?style=for-the-badge&logo=Redux&logoColor=white"/>
<img src="https://img.shields.io/badge/React Native-61DAFB?style=for-the-badge&logo=React&logoColor=black">
<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=JavaScript&logoColor=black">
<img src="https://img.shields.io/badge/Redux-764ABC?style=for-the-badge&logo=Redux&logoColor=black">
<img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=white">
<img src="https://img.shields.io/badge/dotenv-ECD53F?style=for-the-badge&logo=.ENV&logoColor=white">
<img src="https://img.shields.io/badge/Socket.io-010101?style=for-the-badge&logo=Socket.io&logoColor=white">
</div>

### ✔ Back-end
<div>
<img src =https://img.shields.io/badge/NestJS-000000?style=for-the-badge&logo=NestJS&logoColor=red>
<img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=white">
<img src="https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=JSON WEB TOKENS&logoColor=white">
<img src="https://img.shields.io/badge/AWS ECS-FF9900?style=for-the-badge&logo=Amazon ECS&logoColor=white">
<img src="https://img.shields.io/badge/PostgreSQL-4169E1?style=for-the-badge&logo=PostgreSQL&logoColor=white">
<img src="https://img.shields.io/badge/Socket.io-010101?style=for-the-badge&logo=Socket.io&logoColor=white">
<img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=Docker&logoColor=white">
<img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=white">
<img src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=Amazon S3&logoColor=white">
<img src="https://img.shields.io/badge/Amazon CloudWatch-FF4F8B?style=for-the-badge&logo=Amazon CloudWatch&logoColor=white">
<img src="https://img.shields.io/badge/Amazon RDS-527FFF?style=for-the-badge&logo=Amazon RDS&logoColor=white">
<img src="https://img.shields.io/badge/dotenv-ECD53F?style=for-the-badge&logo=.ENV&logoColor=white">
</div>

### ✔ Dev tools
<div>
<img src="https://img.shields.io/badge/Visual Studio Code-007ACC?style=for-the-badge&logo=Visual Studio Code&logoColor=white">
<img src="https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=Git&logoColor=white"/>
<img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white"/>
<img src="https://img.shields.io/badge/KakaoTalk-FFCD00?style=for-the-badge&logo=KakaoTalk&logoColor=black"/>
</div>

<br><br>

## 📝 기술 스택 & 라이브러리 사용 이유

| 기술 스택 | 사용이유 |
| --- | --- |
| NestJS | NestJS는 TypeScript 를 기본으로 지원하고 있다. |
| Socket.IO | 다양한 플랫폼에서 작동이 가능하여, 향후 스케일링을 통한 더 많은 클라이언트와의 연결 처리가 가능하다. |
| JWT | Stateless 하여 로드밸런싱에 이점이 있다. |
| Docker | 어느 환경에서든 동일한 조건으로 배포가 가능하다. |
| TypeORM | TypeSCript를 지원하고, QueryBuilder를 지원한다. |
| Cloud Front | S3에 접근시 캐싱을 통하여 더욱 빠르고, 원본인 S3의 트래픽 부하를 줄일 수 있다. |
| Cloud Watch | 로드밸런싱을 사용했을때 로그를 통합적으로 관리 할 수 있다. |
| React Native | 크로스플랫폼(Cross-platform)을 통한 어플의 확장성을 기대할 수 있고, 코드 푸쉬 기능을 통한 최신 기능 업데이트에 강점이 있다.|
| Axios | promise 기반으로 데이터 처리의 용이, json 데이터 변환을 통한 코드 최적화할 수 있다. |

<details><summary>라이브러리 
</summary>
  
  - redux toolkit :전역 변수의 상태관리를 위해 사용했다. 또한 Reudx의 단점으로 꼽히는 보일러플레이트 코드를 줄일 수 있어서 채택했다.
  
  - React Native Multiple Image Picker : 모바일 기기내의 이미지 및 동영상 파일 업로드하기 위해 사용함. image picker라이브러리와 다르게 업로드와 촬영을 동시에 할 수 있어서 채택함.
  
  - fast image : react native의 image 태그 사용시 이미지가 깨지는 형상이 생기는데, 이를 방지할 수 있다. 또한 랜더링 속도 또한 향상된다.
  
  - react-native-permission : 앨범의 사진이나 동영상 업로드 전 퍼미션을 얻기 위해서 사용했다.
  
  - asynStorage : 자동로그인 구현하는데 필요한 유저 정보를 캐싱하기 위해서 사용했다.
  
  - react-native-splash-screen : 앱 로딩중에 유저가 볼 splash-screen 구현을 위해 사용했다.
  
  - react-native-svg : 리액트와 다르게 reactnative에서는 svg태그를 지원하지 않기 때문에 사용했다.
  
  - react-native-video : 동영상 재생 기능을 구현하기 위해서 사용했다.
  
  - socket io-client : 실시간 채팅을 구현하기 위해서 사용했다. 
  
  - react-native-swiper-flatlist : 프로젝트 기간내에 이미지 슬라이드 효과를 빠르게 구현하기 위해서 사용했다.
  
  - react-native-keyboard-aware-scroll-view : 키보드에 의해서 input창이 가려지지 않게 슬라이드 효과를 주기 위해서 사용했다.
  
  - react-native-papper : 프로젝트 기간내에 특정 컴퍼넌트를 (profile페이지의 input버튼) 빠르게 구현하기 위해서 사용했다.
  </details>
  
## Frontend Git-flow 전략
main : 제품으로 출시될 수 있는 브랜치

develop : 다음 출시 버전을 개발하는 브랜치

feature : 기능을 개발하는 브랜치

hotfix : 출시 버전에서 발생한 버그를 수정 하는 브랜치


#### 규칙

- main 브랜치는 최소한의 병합으로 진행

- 작업을 시작하기 전에 이슈를 생성한다.

- 출시 전까지는 develop 브랜치가 main 브랜치를 대체한다.

- 각자 로컬 개발환경에서 기능별 feature 브랜치 작성 후 작업 feature 브랜치 → develop 브랜치 로 Pull-Request 병합을 요청한다.

- Pull-Request는 1명 이상의 팀원이 승인시에만 merge 가능하다.

- feature 브랜치명은 이슈 번호로 작성

- 배포 시에는  develop 브랜치를  main 브랜치와 merge한 이후 베포, 버그나 이슈가 발생되었을 때에는 hotfix 브랜치로 수정작업을 진행한 후, main 브랜치에 병합한다.

- 업데이트 작업이 완료되면 최후에 main 브랜치에 병합한다.
  
## 👷 ERD

![https://i.imgur.com/6vccr5H.png](https://i.imgur.com/6vccr5H.png)

## 🔆 트러블슈팅

![image](https://user-images.githubusercontent.com/114650436/225261986-2d11fa2f-e91b-4e3c-857d-90b5e1bbaa88.png)


**문제 상황**  : imageGetter라는 컴포넌트를 사진 게시판과 동영상 게시판에서 사용하는데, 동일한 이미지를 랜더링

![image](https://user-images.githubusercontent.com/114650436/225262101-08a6691f-24fa-46d4-9963-a615f7036109.png)

문제 원인 : imageGetter 컴포넌트가 사진게시판에서 Mount된 이후, 동영상게시판에서는 새로 Mount 되지 않음 React Navigation에서는 페이지 이동 시 Unmount되는 게 아닌 Stack이 쌓임

![image](https://user-images.githubusercontent.com/114650436/225262154-7ee30932-9209-4e94-92cd-19baa4c81a86.png)

✅ 해결 방법 :  useIsFocused Hook을 사용페이지에 포커스가 올 때 업데이트가 되도록, useEffect의 의존성 배열에 isFocused를 추가

**문제 상황**  : RNMIP(react native multiple image picker) 라이브러리를 활용해 미디어파일을 전송하는데, 서버에서 파일을 인식하지 못하는(undefined) 문제가 발생

추정 원인 : 서버에서는 이미지 데이터를 buffer형식으로 받는데, 프론트 쪽에서 별도의 인코딩 과정이 없음

![image](https://user-images.githubusercontent.com/114650436/225262195-7e66dec2-8bc4-4805-afc7-27af42796d20.png)

실제 원인 : RNMIP에서 얻은 realPath 경로앞에 file://(파일 URI 스키마)를 적어야 함

![image](https://user-images.githubusercontent.com/114650436/225262320-68f61350-febe-476d-b541-3585ffbdadd0.png)

✅ 깨달은 점:  HTTP 통신할 때 데이터 타입을 HTTP Header에 multipart/form-data 를 명시하면 데이터가 인코딩됨



## 👻 Pupfluencer 팀원들!
  
  <table>
  <tr>
  <td colspan='3' align="center">
  Backend
  </td>
  <tr>
        </td>
    <td align="center" >
    <b>송찬혁(팀장)</b></a><br>
    <a href="https://github.com/sch7878">Github</a>
    <br><img src="https://img.shields.io/badge/NestJS-000000?style=flat&logo=NestJS&logoColor=red"/><br>
    </td>
        </td>
    <td align="center" >
    <b>신중완</b></a><br>
    <a href="https://github.com/F1rstID">Github</a>
    <br><img src="https://img.shields.io/badge/NestJS-000000?style=flat&logo=NestJS&logoColor=red"/><br>
    </td>
        </td>
    <td align="center" >
    <b>이준빈</b></a><br>
    <a href="https://github.com/ljunbin">Github</a>
    <br><img src="https://img.shields.io/badge/NestJS-000000?style=flat&logo=NestJS&logoColor=red"/><br>
    </td>
    </tr>
</table>

<br>

  <table>
  <tr>
  <td colspan='2' align="center">
  Frontend
  </td>
  <tr>
        </td>
    <td align="center" >
    <b>김수홍(팀장)</b></a><br>
    <a href="https://github.com/suhong99">Github</a>
    <br><img src="https://img.shields.io/badge/React-Native-339933?style=flat&logo=React&logoColor=white"/><br>
    </td>
        </td>
    <td align="center" >
    <b>차수지</b></a><br>
    <a href="https://github.com/olive-jam">Github</a>
    <br><img src="https://img.shields.io/badge/React-Native-339933?style=flat&logo=React&logoColor=white"/><br>
    </td>
  </tr>
</table>

<br>

  <table>
  <tr>
  <td colspan='1' align="center">
  Deginer
  </td>
  <tr>
        </td>
    <td align="center" >
    <b>이정효</b></a><br>
    <a href="https://github.com/suhong99">Github</a>
    <br><img src="https://img.shields.io/badge/React-Native-339933?style=flat&logo=React&logoColor=white"/><br>
    </td>

</table>

<br>
